# 物品与背包系统

物品系统是游戏的核心，负责管理所有可交互的资源、工具和装备。

## 物品模型

### 1. 物品原型 (Item)

定义了物品的静态属性：

* **名称与描述**：用于界面显示。
* **基础质量 (Mass)**：物品的单位重量。
* **可堆叠性 (Mergeable)**：定义物品是否可以合并堆叠。
* **组件列表**：定义物品的功能特性（见 ECS 文档）。

### 2. 物品堆栈 (ItemStack)

代表玩家背包中实际存在的物品实例：

* **唯一标识 (ID)**：每个堆栈都有唯一的 ID。
* **当前质量**：对于可堆叠物品，记录总重量；对于不可堆叠物品，通常等于基础质量。
* **动态状态**：记录随时间变化的数据，如当前的耐久度、新鲜度或容器内的内容物。

## 背包系统 (Backpack)

背包负责管理玩家持有的所有物品堆栈。

### 核心功能

* **负重管理**：实时计算所有物品的总重量，并与玩家的最大负重进行比较。
* **自动合并**：当新物品进入背包时，系统会自动寻找同类可堆叠物品进行合并。
* **物品查询**：支持按名称、标签 (Tag) 或组件类型快速查找物品。
* **工具偏好**：记录玩家对不同类型工具（如砍伐工具、切割工具）的偏好设置。

## 特殊物品类型：容器 (Container)

容器是一种特殊的物品，它可以装载其他物品。

* **容量限制**：定义了容器能装载的最大重量。
* **标签过滤**：定义了容器允许装载的物品类型（例如：水壶只能装载液体）。
* **嵌套限制**：为了简化逻辑，系统通常禁止容器的嵌套（容器装容器）。
